<form [formGroup]="formStatus"  *ngIf="!typeDocument && project.documents">

  <div class="contBoton1">
    <button class="correo" [disabled]="project.approveStep5" (click)="changeStatus()" *ngIf="user.rol == 'admin'">Guardar cambios</button>
    <button  [disabled]="!isApprovable() || project.approveStep5" (click)="approve()" *ngIf="user.rol == 'admin'">Aprobar</button>
  </div>


    <div class="titulos">
        <span> Documento </span>
        <span> Estado </span>
        <span> Fecha </span>
        <span *ngIf="user.rol == 'admin'">Observaci√≥n</span>
    </div>

    <ng-container *ngIf="project.documents" >
        <div *ngFor=" let type of typeDocuments let i = index" class="documentos">
            <span>{{ i+1 }}</span>
            <div class="contDoc">
                <span class="truncar-texto">{{ nameDocuments[i] }}</span>


                <ng-container *ngIf="project.documents[type] else default">
                  <div class="divSlc">
                    <select class="slc" *ngIf="user.rol == 'admin'" id="state" required formControlName="{{type}}">
                      <option value="Pendiente">Pendiente</option>
                      <option value="Aceptado">Aceptado</option>
                      <option value="Incompleto">Incompleto</option>
                    </select>
                  </div>


                    <span *ngIf="user.rol == 'user'"> {{ project.documents[type].status }} </span>

                    <span> {{ project.documents[type].date.toDate() | date:"longDate" }} </span>
                    <button *ngIf="user.rol == 'admin'" (click)="redirectUpdateDocuments(type, 'download')">Descargar</button>

                    <div *ngIf="user.rol == 'admin'">
                        <input type="text" formControlName="{{type}}Observation">
                    </div>

                    <div *ngIf="user.rol == 'user' && type != 'sourceCode'">
                        <button (click)="redirectUpdateDocuments(type, 'download')">Descargar</button>
                        <button [disabled]="project.documents[type].status == 'Aceptado'" (click)="redirectUpdateDocuments(type, 'upload')">Subir</button>
                        <button [disabled]="project.documents[type].status == 'Aceptado'" (click)="redirectUpdateDocuments(type, 'delete')">Eliminar</button>
                    </div>
                </ng-container>

                <ng-template #default>

                    <select class="slc" *ngIf="user.rol == 'admin'" id="state" formControlName="{{type}}">
                        <option selected value="Pendiente">Pendiente</option>
                        <option disabled value="Aceptado" >Aceptado</option>
                        <option disabled value="Incompleto" >Incompleto</option>
                    </select>
                    <span *ngIf="user.rol == 'user'"> Pendiente </span>

                    <span> Sin Fecha </span>

                    <div *ngIf="user.rol == 'admin'">
                        <input type="text" formControlName="{{type}}Observation">
                    </div>

                    <div *ngIf="user.rol == 'user' && type != 'sourceCode'">
                        <button [disabled]="true" (click)="redirectUpdateDocuments(type, 'download')">Descargar</button>
                        <button (click)="redirectUpdateDocuments(type, 'upload')">Subir</button>
                        <button [disabled]="true" (click)="redirectUpdateDocuments(type, 'delete')">Eliminar</button>
                    </div>
                </ng-template>
            </div>
        </div>
    </ng-container>
</form>

<app-multiple-file-load *ngIf="typeDocument && operation" [project]="project" [title]="getTitle(typeDocument)" [description]="" [type]="'.pdf'" [typeDocument]="typeDocument" [numStep]="5" [operation]="operation" [rol]="user.rol"></app-multiple-file-load>

